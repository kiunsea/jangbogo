# 개발 편의 스크립트

Jangbogo 프로젝트 개발을 위한 배치 스크립트 모음입니다.

---

## 📋 스크립트 목록

### 1. test_run.bat - 개발 테스트 실행

**용도:** 개발 모드로 애플리케이션을 빠르게 실행

**실행 명령:**
```cmd
bat\test_run.bat
```

**동작:**
- Gradle bootRun 태스크 실행
- 포트 8282에서 서버 시작
- 코드 변경 시 재시작 없이 테스트 가능

**출력 예시:**
```
========================================================
  Jangbogo 개발 테스트 실행
========================================================

작업 디렉토리: D:\GIT\jangbogo

Gradle bootRun 태스크를 실행합니다...
포트: 8282
접속: http://localhost:8282

종료하려면 Ctrl+C를 누르세요.
========================================================
```

**언제 사용:**
- ✅ 코드 수정 후 빠른 테스트
- ✅ 로컬 개발 환경에서 실행
- ✅ IDE 없이 명령줄에서 실행

---

### 2. build_package.bat - 배포 패키지 빌드

**용도:** 배포용 ZIP 패키지 전체 빌드

**실행 명령:**
```cmd
bat\build_package.bat
```

**동작:**
- 이전 빌드 결과 삭제 (clean)
- Spring Boot JAR 생성 (bootJar)
- Custom JRE 생성 (createJre)
- ZIP 패키지 생성 (packageDist)
- 완료 후 탐색기에서 ZIP 파일 자동 열기

**소요 시간:** 약 1-2분

**출력 예시:**
```
========================================================
  Jangbogo 배포 패키지 빌드
========================================================

배포 패키지를 빌드합니다...
- clean: 이전 빌드 결과 삭제
- bootJar: Spring Boot JAR 생성
- createJre: Custom JRE 생성
- packageDist: ZIP 패키지 생성

예상 소요 시간: 1-2분
========================================================

[빌드 진행...]

========================================================
  빌드 완료!
========================================================

생성된 파일:
  - build\distributions\Jangbogo-distribution.zip
  - 크기: 95 MB

ZIP 파일을 탐색기에서 열려면 아무 키나 누르세요...
```

**언제 사용:**
- ✅ 배포 패키지 생성할 때
- ✅ 릴리스 전 빌드 테스트
- ✅ 다른 사람에게 전달할 ZIP 생성

---

### 3. clean_build.bat - 클린 빌드

**용도:** 이전 빌드 결과 삭제 후 완전히 새로 빌드

**실행 명령:**
```cmd
bat\clean_build.bat
```

**동작:**
- 이전 빌드 결과 삭제 (clean)
- 컴파일 및 테스트 실행 (build)
- JAR 파일 생성

**출력 예시:**
```
========================================================
  Jangbogo 클린 빌드
========================================================

이전 빌드 결과를 삭제하고 새로 빌드합니다...

[빌드 진행...]

========================================================
  클린 빌드 완료!
========================================================

생성된 파일:
  - build\libs\jangbogo-0.6.0.jar
  - JAR 크기: 85 MB
```

**언제 사용:**
- ✅ 빌드 오류 해결할 때
- ✅ 캐시 문제로 재빌드 필요할 때
- ✅ 테스트까지 포함한 전체 빌드

---

## 🎯 용도별 사용 가이드

### 일반 개발 작업
```cmd
1. 코드 수정
2. bat\test_run.bat 실행
3. 브라우저에서 테스트
4. 종료 (Ctrl+C)
5. 1번으로 돌아가기
```

### 배포 전 테스트
```cmd
1. bat\clean_build.bat 실행 (테스트 포함)
2. 테스트 통과 확인
3. bat\build_package.bat 실행
4. ZIP 파일 테스트
```

### 릴리스 빌드
```cmd
1. 버전 번호 확인 (build.gradle)
2. 문서 업데이트
3. bat\build_package.bat 실행
4. ZIP 파일 배포
```

---

## 🔧 공통 특징

모든 스크립트는 다음 기능을 포함합니다:

- ✅ **자동 경로 이동**: `cd /d "%~dp0\.."` - bat 폴더에서 프로젝트 루트로 자동 이동
- ✅ **UTF-8 한글 출력**: `chcp 65001` 자동 설정
- ✅ **gradlew.bat 자동 감지**: 프로젝트 루트 확인
- ✅ **오류 처리**: ERRORLEVEL 체크 및 메시지 표시
- ✅ **진행 상황 표시**: 명확한 단계별 안내
- ✅ **결과 확인**: 생성된 파일 크기 및 위치 표시

---

## 📍 파일 위치

```
jangbogo/
└─ bat/                   # 개발 스크립트 폴더
   ├─ test_run.bat        # 개발 테스트 실행
   ├─ build_package.bat   # 배포 패키지 빌드
   └─ clean_build.bat     # 클린 빌드
```

**사용:** 프로젝트 루트에서 `bat\스크립트명.bat` 형식으로 실행

---

## 🔍 Gradle 명령어 직접 사용

배치 파일 대신 Gradle을 직접 사용하려면:

```bash
# 개발 실행
.\gradlew bootRun

# JAR만 빌드
.\gradlew bootJar

# Custom JRE만 생성
.\gradlew createJre

# 배포 패키지 전체 빌드
.\gradlew clean bootJar createJre packageDist

# 테스트 포함 빌드
.\gradlew clean build

# 의존성 새로고침
.\gradlew clean build --refresh-dependencies
```

---

## ⚠️ 주의사항

### gradlew.bat 권한 오류
PowerShell에서 실행 시:
```powershell
.\gradlew.bat bootRun    # .\ 필요
```

### 포트 충돌
8282 포트가 이미 사용 중이면:
```cmd
# 사용 중인 프로세스 확인
netstat -ano | findstr :8282

# 프로세스 종료
taskkill /F /PID [PID번호]
```

---

## 📖 관련 문서

- [빌드 가이드](doc/user/BUILD_GUIDE.md) - 상세 빌드 방법
- [배포 가이드](doc/user/DEPLOYMENT_GUIDE.md) - 배포 및 설치
- [개발자 문서](doc/developer/README.md) - 기술 문서

---

**버전:** 0.6.0
**최종 업데이트:** 2026-01-28

